<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Athiya L&D ‚Ä¢ Cross-Cultural Module</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
      :root { --indigo:#4f46e5; --slate:#0f172a; }
      * { box-sizing: border-box; }
      body { margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji'; color:#0f172a; background:#f8fafc; }
      .container { max-width: 960px; margin: 0 auto; padding: 16px; }
      .card { background:white; border-radius: 24px; padding:24px; box-shadow: 0 10px 30px rgba(2,6,23,.08); border:1px solid #e2e8f0;}
      .btn { padding:10px 16px; border-radius:12px; border:1px solid #e2e8f0; background:#f1f5f9; cursor:pointer; }
      .btn.primary { background: var(--indigo); color:white; border-color: transparent; }
      .btn:disabled { opacity:.6; cursor:not-allowed; }
      .progress { height:8px; width:100%; background:#e2e8f0; border-radius:999px; overflow:hidden; }
      .progress > div { height:100%; background:white; width:0; transition:width .3s; }
      .header { position:sticky; top:0; background:rgba(255,255,255,.8); backdrop-filter: blur(6px); border-bottom:1px solid #e2e8f0; }
      .badge { padding:6px 10px; border-radius:10px; background:#fef3c7; color:#92400e; border:1px solid #fde68a; }
      .row { display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
      .stack { display:flex; gap:12px; flex-wrap:wrap; }
      @media (max-width: 640px) { .row { flex-direction:column; align-items:stretch; } }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="container row">
        <div class="row" style="gap:8px">
          <div style="width:32px;height:32px;border-radius:12px;background:var(--indigo)"></div>
          <strong>athiya ‚Ä¢ L&D</strong>
        </div>
        <div class="stack">
          <button class="btn" id="btn-google">Sign in with Google</button>
          <button class="btn" id="btn-ms">Sign in with Microsoft</button>
        </div>
      </div>
    </header>
    <div id="root" class="container"></div>

    <!-- React & ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <script type="module">
      // SSO placeholders ‚Äî integrate Firebase Auth or your IdP here.
      document.getElementById('btn-google').addEventListener('click', () => alert('TODO: Implement Google SSO via Firebase Auth (GoogleAuthProvider).'));
      document.getElementById('btn-ms').addEventListener('click', () => alert('TODO: Implement Microsoft SSO (OAuth / Azure AD) or Firebase OIDC Provider.'));

      const tips = await (await fetch('../shared/tips.json')).json();
      const quiz = await (await fetch('../shared/quiz.json')).json();

      const e = React.createElement;
      const { useState, useMemo } = React;

      function App() {
        const [index, setIndex] = useState(0);
        const [showQuiz, setShowQuiz] = useState(false);
        const [responses, setResponses] = useState(Array(quiz.length).fill(-1));
        const [submitted, setSubmitted] = useState(false);
        const progress = ((index+1)/tips.length)*100;
        const correct = useMemo(()=>responses.reduce((a,r,i)=>a+(r===quiz[i].answer?1:0),0),[responses]);

        return e('div', {style:{paddingTop:16,paddingBottom:24}},
          e('section', null,
            e('div', {className:'card', style:{background:`linear-gradient(135deg, var(--indigo), #6366f1)`, color:'white'}},
              e('h1', null, 'Work With The World'),
              e('p', {style:{opacity:.9}}, 'Master cross‚Äëcultural client communication.'),
              e('div', {className:'progress'}, e('div', {style:{width:progress+'%'}})),
              e('div', null, `Card ${index+1} / ${tips.length}`)
            )
          ),
          e('main', {style:{marginTop:16}},
            e('div', {className:'card'},
              e('div', {style:{fontSize:48}}, tips[index].icon),
              e('h2', null, tips[index].title),
              e('p', {style:{color:'#475569'}}, tips[index].oneLiner),
              e('details', null,
                e('summary', null, 'Learn more'),
                e('p', null, tips[index].detail)
              ),
              e('div', {className:'row', style:{marginTop:16}},
                e('button', {className:'btn', onClick:()=>setIndex(i=>Math.max(0,i-1)), disabled:index===0}, '‚Üê Back'),
                index<tips.length-1
                  ? e('button', {className:'btn primary', onClick:()=>setIndex(i=>Math.min(tips.length-1,i+1))}, 'Next ‚Üí')
                  : e('button', {className:'btn primary', onClick:()=>setShowQuiz(true)}, 'Take Quiz ‚úÖ')
              )
            ),
            e('p', {style:{textAlign:'center', color:'#64748b', fontSize:12, marginTop:8}}, 'Tip: use ‚Üê ‚Üí keys; swipe on mobile.')
          ),
          showQuiz && e(QuizModal, {quiz, responses, setResponses, submitted, setSubmitted, correct, close:()=>setShowQuiz(false)}),
          e('footer', {style:{textAlign:'center', color:'#64748b', fontSize:12, marginTop:24}}, `¬© ${new Date().getFullYear()} Athiya Learning ‚Ä¢ Prototype`)
        );
      }

      function QuizModal({quiz, responses, setResponses, submitted, setSubmitted, correct, close}) {
        return React.createElement('div', {style:{
          position:'fixed', inset:0, background:'rgba(15,23,42,.5)', display:'flex', alignItems:'center', justifyContent:'center', padding:16
        }},
          React.createElement('div', {className:'card', style:{maxWidth:900, width:'100%'}},
            React.createElement('div', {className:'row'},
              React.createElement('h3', null, 'Quick Check'),
              React.createElement('button', {className:'btn', onClick:close}, '‚úï')
            ),
            React.createElement('ol', {style:{marginTop:12, display:'grid', gap:12}},
              quiz.map((item, qi)=>React.createElement('li', {key:qi, className:'card', style:{border:'1px solid #e2e8f0'}},
                React.createElement('div', {style:{fontWeight:600}}, (qi+1)+'. '+item.q),
                React.createElement('div', {style:{display:'grid', gap:8, gridTemplateColumns:'repeat(auto-fit,minmax(220px,1fr))', marginTop:8}},
                  item.options.map((opt, oi)=>React.createElement('button', {
                    key:oi,
                    className:'btn',
                    onClick:()=>!submitted && setResponses(r=>{const n=[...r]; n[qi]=oi; return n;}),
                    style: responses[qi]===oi ? {border:'2px solid var(--indigo)'} : {}
                  }, opt))
                ),
                submitted && responses[qi]!==-1 && React.createElement('p', {style:{marginTop:8,fontSize:14}},
                  (responses[qi]===item.answer ? 'Correct. ' : 'Not quite. ')+item.explain
                )
              ))
            ),
            React.createElement('div', {className:'row', style:{marginTop:12}},
              !submitted
                ? React.createElement('button', {className:'btn primary', onClick:()=>setSubmitted(true)}, 'Submit Answers')
                : React.createElement('div', {className:'stack'},
                    React.createElement('div', {className:'badge'}, `Score: ${Math.round(correct/quiz.length*100)}% (${correct}/${quiz.length})`),
                    (Math.round(correct/quiz.length*100) >= 80) && React.createElement('div', {className:'badge'}, 'Badge earned: Global Communicator üèÖ')
                  ),
              React.createElement('button', {className:'btn', onClick:()=>{ if(submitted){ setResponses(Array(quiz.length).fill(-1)); setSubmitted(false);} close(); }}, submitted? 'Close & Reset' : 'Close')
            )
          )
        );
      }

      ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
    </script>
  </body>
</html>
